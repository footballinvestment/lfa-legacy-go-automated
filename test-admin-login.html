<!DOCTYPE html>
<html>
<head>
    <title>Admin Login Test</title>
</head>
<body>
    <h1>Testing Admin Login</h1>
    <div id="result"></div>
    
    <script>
    async function testAdminLogin() {
        try {
            const response = await fetch('https://lfa-legacy-go-backend-tv6u4m3szq-uc.a.run.app/api/auth/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    username: 'debugadmin',
                    password: 'DebugAdmin2024!'
                })
            });
            
            const data = await response.json();
            
            if (response.ok) {
                document.getElementById('result').innerHTML = `
                    <h2>‚úÖ LOGIN SUCCESS</h2>
                    <p>Token: ${data.access_token.substring(0, 20)}...</p>
                    <p>User: ${data.user.username}</p>
                    <p>Email: ${data.user.email}</p>
                `;
                
                // Test accessing admin panel
                localStorage.setItem('authToken', data.access_token);
                localStorage.setItem('currentUser', JSON.stringify(data.user));
                
                // Redirect to admin panel
                setTimeout(() => {
                    window.location.href = 'https://lfa-legacy-go.netlify.app/admin';
                }, 2000);
                
            } else {
                document.getElementById('result').innerHTML = `
                    <h2>‚ùå LOGIN FAILED</h2>
                    <p>Status: ${response.status}</p>
                    <p>Error: ${data.detail}</p>
                `;
            }
        } catch (error) {
            document.getElementById('result').innerHTML = `
                <h2>üî• NETWORK ERROR</h2>
                <p>${error.message}</p>
            `;
        }
    }
    
    // Auto-run test
    testAdminLogin();
    </script>
</body>
</html>